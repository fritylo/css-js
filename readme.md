# CSS-JS

### Библиотека для упрощения работы с CSS значениями и переменными


## Глобальные константы

Константы задают значения по умолчанию. В зависимости от вашего проекта, измените их значение в начале скрипта библиотеки.

| Константа        | Значение | Описание     |
| ---------        | -------- | --------     |
| PARENT_FONT_SIZE | 14       | Размер текста родителей в пикселах |
| ROOT_FONT_SIZE   | 14       | Размер текста на корневом элементе страницы в пикселах |


## `CSS.helpers` - Вспомагательные функции

Все вспомагательные функции находятся в объекте `CSS.helpers`.

Вспомагательные функции добавляются к возвращаемому значению из функций `CSS.vars` и `CSS.props`. При этом, на первый параметр привязывается значение, которое было получено, поэтому значение в вспомагательные функции передавать не надо.

### `CSS.helpers.toPx`

Функция выполняет преобразование любой строки в число, соответствующее числу пикселей этого значения.

Строка может содержать следующее:

- Значение в px (напр. `10px`)
- Значение в em (напр. `10em`)
- Значение в rem (напр. `10rem`)
- Другая переменная (напр. `var(--name)`)
- Действия в calc() (напр. `calc(1px + 1em)`)

Функция получает следующие параметры:

| Параметр       | Тип          | По умолчанию     | Описание |
| ---------      | -----        | --------         | ----     |
| value          | string       |                  | Строка, которую надо преобразовать в пикселы |
| parentFontSize | float        | PARENT_FONT_SIZE | Размер родительского текста в пикселах, для преобразования `em` |
| rootFontSize   | float        | ROOT_FONT_SIZE   | Размер текста корня страницы в пикселах для преобразования `rem` |
| precision      | unsigned int | 2                | Кол-во знаков после запятой, после округления |

**Возвращает**: `int`

Примеры использования:
```js
CSS.helpers.toPx('1px'); // 1

CSS.helpers.toPx('10em'); // 10em * 14px = 140
CSS.helpers.toPx('10em', 10); // 10em * 10px = 100

CSS.helpers.toPx('10rem'); // 10rem * 14px = 140
CSS.helpers.toPx('10rem', 0, 10); // 10rem * 10px = 100

CSS.helpers.toPx('var(--margin)'); // значение переменной margin в пикселах

// Округление необходимо, потому что деление и умножение дают приблизительный результат. По умолчанию, 2 знака после запятой
CSS.helpers.toPx('1.25em', 7, 0, 1); // 1.25em * 7px = 8.75 => 8.7

CSS.helpers.toPx('calc(1em + 3px))'); // 1em * 14 + 3px = 17

// Всё вместе, пусть --margin: 1em
CSS.helpers.toPx('calc(var(--margin) + 10em + 5rem - 20px)', 14, 12); // 1em*14 + 10em*14 + 5rem*12 - 20px = 194
```


## `CSS.vars` - Корневые переменные

### `CSS.vars.get`

Получает значение корневой переменной в виде строки. Далее значение может быть преобразовано с помощью вспомогательной функции.

Функция получает следующие параметры:

| Параметр       | Тип          | По умолчанию     | Описание |
| ---------      | -----        | --------         | ----     |
| name           | string       | -                 | Название CSS переменной |

**Возвращает**: `{ value: string, ...CSS.helpers }`

Примеры использования:
```js
CSS.vars.get('--color'); // значение :root { --color: ... }

CSS.vars.get('--margin').value; // 1em
CSS.vars.get('--margin').toPx(); // 14
```

### `CSS.vars.set`

Устанавливает значение корневой переменной.

Функция получает следующие параметры:

| Параметр       | Тип          | По умолчанию     | Описание |
| ---------      | -----        | --------         | ----     |
| name           | string       | -                 | Название CSS переменной |
| value          | string       | -                 | Значение CSS переменной |

**Возвращает**: `{ value: string, ...CSS.helpers }`

Примеры использования:
```js
CSS.vars.set('--color', '#AAA'); // значение :root { --color: ... } станет #AAA

CSS.vars.set('--margin', '1em'); // { value: '1em', ...CSS.helpers }
```


## `CSS.props` - Свойства HTML элементов

### `CSS.props.get`

Получает значение свойства в виде строки, после применения всех CSS правил. Далее значение может быть преобразовано с помощью вспомогательной функции.

Функция получает следующие параметры:

| Параметр       | Тип          | По умолчанию     | Описание |
| ---------      | -----        | --------         | ----     |
| element        | HTMLElement  | -                | Элемент в котором берется свойство |
| name           | string       | -                 | Название CSS свойства |

Чтобы получить значение локальной переменной, просто передайте в качестве имени свойства название этой переменной.

**Возвращает**: `{ value: string, ...CSS.helpers }`

Примеры использования:
```js
const body = document.body;

CSS.props.get(body, 'color'); // #000

CSS.props.get(body, '--margin').value; // 1em
CSS.props.get(body, '--margin').toPx(); // 14
```

### `CSS.props.set`

Устанавливает значение свойства в атрибут style HTML элемента.

Функция получает следующие параметры:

| Параметр       | Тип          | По умолчанию     | Описание |
| ---------      | -----        | --------         | ----     |
| element        | HTMLElement  | -                 | Элемент для которого устанавливается значение свойства |
| name           | string       | -                 | Название CSS свойства |
| value          | string       | -                 | Значение CSS свойства |

**Возвращает**: `{ value: string, ...CSS.helpers }`

Примеры использования:
```js
const body = document.body;

CSS.props.set(body, 'color', '#AAA'); // <body style="color: #AAA">...</body>

CSS.props.set(body, '--margin', '1em'); // <body style="--margin: 1em">...</body>
```
